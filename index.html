<!DOCTYPE html>
<html lang="ar">
  <head>
    <meta charset="UTF-8" />
    <title>Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@200..1000&display=swap"
      rel="stylesheet"
    />
    <style>
      html,
      body {
        height: 100%;
        margin: 0;
        font-family: "Cairo", sans-serif;
        background-color: #f3f3f3;
      }

      #products {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
        padding: 20px;
        text-align: center;
        justify-items: center;
      }

      .list {
        background-color: #000;
        color: rgb(255, 183, 0);
        text-align: center;
        width: 500px;
        margin: 40px auto 20px;
        padding: 10px;
        border-radius: 30px;
      }

      .box-color {
        background-color: #ddd;
        border-radius: 30px;
        width: 300px;
        padding: 15px;
      }

      .box-color img {
        width: 270px;
        border-radius: 20px;
      }

      .order-btn {
        background-color: #25d366;
        color: white;
        padding: 10px 15px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        margin-top: 10px;
      }

      .footer {
        background-color: #000;
        color: red;
        text-align: center;
        padding: 10px 0;
        margin-top: 50px;
      }

      .footer h1 {
        margin: 0;
        padding: 5px;
        color: rgb(255, 183, 0);
        border-bottom: 1px solid white;
      }

      .imags img {
        width: 50px;
        margin-right: 5px;
      }

      .imags {
        padding: 10px;
      }

      /* Modal styles */
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
      }

      .modal-content {
        background-color: white;
        margin: 10% auto;
        padding: 20px;
        border-radius: 15px;
        width: 100%;
        max-width: 500px;
        direction: rtl;
        text-align: center;
      }

      .modal-content h3 {
        margin-top: 0;
      }

      .modal-content input,
      .modal-content textarea {
        width: 70%;
        padding: 10px;
        margin-bottom: 10px;
        border-radius: 6px;
        border: 1px solid #ccc;
      }

      .close {
        float: left;
        font-size: 24px;
        cursor: pointer;
      }

      .send-btn {
        background-color: #128c7e;
        color: white;
        padding: 10px 15px;
        border: none;
        border-radius: 6px;
        width: 100%;
        font-weight: bold;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h1 class="list">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h1>
    <div id="products"></div>

    <!-- Modal -->
    <div id="orderModal" class="modal">
      <div class="modal-content">
        <span class="close" id="closeModal">&times;</span>
        <h3>Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ù„Ø·Ù„Ø¨</h3>
        <input type="text" id="username" placeholder="Ø§Ù„Ø§Ø³Ù…" required />
        <input type="tel" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required />
        <input type="text" id="address" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†" required />
        <textarea id="notes" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></textarea>
        <button class="send-btn" id="sendOrder">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
      </div>
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
      import {
        getFirestore,
        collection,
        getDocs,
      } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyCSKBvATBOik2am510JJmoj2MYQszHy32Y",
        authDomain: "fayad-8f902.firebaseapp.com",
        projectId: "fayad-8f902",
        storageBucket: "fayad-8f902.firebasestorage.app",
        messagingSenderId: "513233944816",
        appId: "1:513233944816:web:da524ebd1a7aac866d8235",
        measurementId: "G-V76JL0C0L1",
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      const container = document.getElementById("products");
      const modal = document.getElementById("orderModal");
      const closeModal = document.getElementById("closeModal");
      const sendOrder = document.getElementById("sendOrder");

      let selectedProduct = "";

      async function loadProducts() {
        const querySnapshot = await getDocs(collection(db, "products"));
        querySnapshot.forEach((doc) => {
          const data = doc.data();
          const name = data.name;
          const price = data.price;

          const box = document.createElement("div");
          box.className = "box-color";

          box.innerHTML = `
          <h1>${name}</h1>
          <p>Ø§Ù„Ø³Ø¹Ø±: ${price} Ø¬Ù†ÙŠÙ‡</p>
          <img src="${data.image}" alt="${name}" />
          <br />
          <button class="order-btn">Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</button>
        `;

          box.querySelector(".order-btn").addEventListener("click", () => {
            selectedProduct = `Ø§Ù„Ù…Ù†ØªØ¬: ${name}\nØ§Ù„Ø³Ø¹Ø±: ${price} Ø¬Ù†ÙŠÙ‡`;
            modal.style.display = "block";
          });

          container.appendChild(box);
        });
      }

      loadProducts();

      closeModal.onclick = () => {
        modal.style.display = "none";
      };

      window.onclick = (e) => {
        if (e.target == modal) {
          modal.style.display = "none";
        }
      };

      sendOrder.onclick = () => {
        const username = document.getElementById("username").value.trim();
        const phone = document.getElementById("phone").value.trim();
        const address = document.getElementById("address").value.trim();
        const notes = document.getElementById("notes").value.trim();

        if (!username || !phone || !address) {
          alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ù…Ù„Ø£ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");
          return;
        }

        const message = `ğŸ›’ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯:\n\n${selectedProduct}\n\nğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${username}\nğŸ“ Ø§Ù„Ù‡Ø§ØªÙ: ${phone}\nğŸ  Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${address}\nğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª: ${
          notes || "Ù„Ø§ ÙŠÙˆØ¬Ø¯"
        }`;
        const whatsappUrl = `https://wa.me/201281815635?text=${encodeURIComponent(
          message
        )}`;
        window.open(whatsappUrl, "_blank");
        modal.style.display = "none";
      };
    </script>

    <div class="footer">
      <h1>Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø§</h1>
      <div class="imags">
        <img src="whatsapp.png" alt="" />
        <img src="whatsapp.png" alt="" />
        <img src="whatsapp.png" alt="" />
      </div>
    </div>
  </body>
</html>
